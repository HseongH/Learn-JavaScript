# 데이터 타입

## 1. 데이터 타입의 종류

기본형과 참조형으로 나뉜다.

### 1.1 기본형

할당이나 연산시 값이 담긴 주소값을 바로 복제한다. 불변형이다.

- Number(숫자)
- String(문자)
- Boolean
- null
- undefined
- Symbol

***

### 1.2 참조형

할당이나 연산시 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제한다.

- Object(객체)
    - Array(배열)
    - function(함수)
    - Date
    - RegExp(정규식)
    - Map
    - WeakMap
    - Set
    - WeakSet

***

## 2. 데이터 타입 배경지식

### 2.1 메모리와 데이터

- 컴퓨터는 모든 데이터를 0 또는 1로 처리, 0 또는 1로 처리할 수 있는 하나의 메모리 조각을 비트(bit)라 한다.
- 하나의 비트 단위로 데이터의 위치를 찾는 것보다는 몇 개의 비트를 묶어 데이터를 검색하는 것이 더 효율적이다.
    - 데이터를 효율적으로 찾을 수 있도록 8개의 비트를 하나의 묶음으로 만들었는데 이것이 바이트(byte)이다.
        - 바이트는 256개의 값을 표현할 수 있다.

***

### 2.2 변수와 식별자

- 변수: 변할 수 있는 무언가(데이터)가 담길 수 있는 공간 또는 그릇
- 식별자: 데이터를 식별하는 데 사용하는 이름, 즉 변수명

***

### 2.3 변수 선언

```javascript
var a = 1;
```

1. 메모리에서 빈 공간(@1003)을 하나 확보한다.
2. @1003에 변수의 식별자를 a로 지정한다.
3. 데이터를 저장할 빈 공간(@5003)을 하나 확보한다.
4. @5003에 변수의 값을 저장한다.
5. a라는 식별자를 검색한다.
6. @1003의 공간에 값이 저장된 주소 @5003을 저장한다.

#### 장점

#### 1. 메모리를 효율적으로 관리할 수 있다.
    
문자의 경우 한 글자마다 차지하는 용량이 가변적(영어는 1바이트 한글은 2바이트 등)인데 데이터를 저장할 공간을 따로 두지않고 변수의 공간에 같이 저장할 경우 문자가 변경될 때마다 문자열의 크기에 맞춰 확보된 공간을 늘려야한다. 데이터 저장 공간이 중간에 위치해 있다면 뒤에 저장된 데이터를 뒤로 옮기는 연산을 수행해야 한다.

하지만 따로 둘 경우 abc에서 def를 추가해 abcdef를 변수에 할당할 때 abc가 저장된 데이터 공간은 그대로 두고 abcdef 문자열을 새로 만들어 별도의 공간에 저장하고 변경된 주소를 변수 공간에 연결한다. 데이터를 변경할 때마다 불필요한 연산을 수행할 필요가 없어 컴퓨터 입장에서 부담이 줄어든다.

#### 2. 중복된 데이터 처리 효율이 높아진다.

변수 50개를 선언하고 값을 0으로 초기화하는 경우, 0을 임의의 공간에 할당하고 그 주소를 50개의 변수가 참조하면 되기 때문에 중복을 처리하는 데 불필요한 데이터가 낭비되지 않는다.

***

### 2.4 불변값

기본형 데이터는 모두 불변값이다.

변수와 상수를 결정하는 것은 변수 영역의 메모리를 변경할 수 있는 지의 여부이고, 가변성과 불변성을 결정짓는 것은 데이터 영역의 메모리를 변경할 수 있는 지의 여부이기 때문에 상수와 불변성은 다른 것이다.

```javascript
var a = 'abc';
a += 'def';

var b = 5;
var c = 5;
b = 7;
```

1. a의 경우
    - a에 할당된 데이터 'abc' 자체가 변경되는 것이 아니라 'abcdef'라는 새로운 데이터를 생성하고 그 주소를 a에 저장한다.
2. b의 경우
    - 데이터 영역에서 5를 찾는다.
    - 5가 없으면 새로 만들어 5를 저장한 주소를 변수에 할당한다.
3. c의 경우
    - 데이터 영역에서 5를 찾는다.
    - 이미 5가 존재하기 때문에 그 주소를 c에 할당한다.
4. b의 데이터를 변경하는 경우
    - b에 할당된 5가 7로 변경되는 것이 아니라 데이터 영역에 7이 있다면 재활용하고 없다면 새로 만들어 b에 저장된 주소 값을 바꾼다.

이처럼 변수에 담긴 데이터는 다른 값으로 바꿀 수 없다. 변경하는 작업은 새로 만드는 동작을 통해서만 이루어진다. 이것이 불변값의 성질이다.

***

### 2.5 가변값

참조형 데이터는 기본적으로 가변값이지만 설정에 따라 변경 불가능한 경우도 있고, 아예 불변값으로 활용하는 방법도 있다.

#### 2.5.1 참조형 데이터 변수 할당 과정

```javascript
var obj = {
    num: 1,
    str: 'aaa'
};
```

1. 메모리에서 빈 공간 @1002를 확보하고 이름을 obj로 지정한다,
2. 임의의 데이터 공간(@5002)에 값을 저장하려고 보니 여러 개의 프로퍼티(변수)로 이루어진 데이터 그룹이다. 프로퍼티(변수)들을 저장하기 위해 별도의 변수 영역(@7002 ~ ?)을 확보하고, 그 영역의 주소를 @5002에 저장한다.
3. 별도의 변수 영역(@7002 ~ ?)에 각각 num과 str이라는 프로퍼티(변수) 이름을 지정한다.
4. 데이터 영역에 1, aaa가 있는 지를 검색하고 없으면 임의의 주소(@5003, @5004)에 저장하고 그 주소값을 변수 영역(@7002 ~ ?)에 저장한다.

#### 2.5.2 참조형 데이터 프로퍼티 재할당

```javascript
var obj = {
    num: 1,
    str: 'aaa'
};

obj.num = 2;
```

1. 데이터 영역에서 2가 저장되어 있는 지 검색한다.
2. 없으면 임의의 주소(@5005)에 새로 만들고 이 주소값을 num 프로퍼티(변수)가 있는 @7002에 저장한다.

변수 obj가 바라보고 있는 주소는 @5002로 변하지 않았다. 즉, 새로운 객체가 만들어진 것이 아니라 기존 객체에서 내부 값만 변경된 것을 뜻한다.

참조형 데이터는 프로퍼티(변수) 영역이 따로 존재하고, 값이 저장되어 있는 주소값은 프로퍼티(변수) 영역에 저장된다. 데이터 영역이 저장하고 있는 프로퍼티(변수)의 주소값은 변경되지 않지만, 프로퍼티(변수)가 저장하고 있는 데이터의 주소값은 변경 가능하기 때문에 불변하지 않다(가변값이다)라고 한다.

#### 2.5.3 중첩된 참조형 데이터 할당

```javascript
var obj = {
    num: 1,
    arr: [3, 4, 5]
};
```

1. 임의의 빈 공간(@1002)을 확보하고 이름을 obj로 지정한다.
2. 데이터를 저장하려고 보니 여러 개의 프로퍼티(변수)로 이루어진 데이터 그룹이다. 임의의 변수 영역(@7002 ~ ?)들을 확보하고 주소값을 임의의 주소(@5002)에 저장한다.
3. 1이 저장되어 있다면 재활용하고 아니면 새로 만든 뒤(@5003) 그 주소값을 @7002에 저장한다.
4. @7003 arr의 데이터를 저장하려고 보니 여러 개의 데이터를 가진 데이터 그룹이다. 각각의 데이터를 저장할 변수 영역(@8002 ~ ?)을 확보하고 주소값을 임의의 주소(@5004)에 저장하고 @7003에 @5004를 저장한다.
5. @8002 ~ ?에 각각의 인덱스 번호를 부여한다.
6. 3, 4, 5를 검색하고 없으면 새로 만들어 @8002 ~ ?에 저장한다.

#### 2.5.4 obj.arr[1] 값 가져오기

1. obj를 검색하고 obj에 저장된 주소 @5002로 이동한다.
2. 저장된 값이 주소이므로 그 주소(@7002 ~ ?)로 이동한다.
3. 주소로 이동해 arr이 있는 곳으로 이동한다.
4. 값이 주소이므로 그 주소(@5004)로 이동한다.
5. 값이 주소이므로 그 주소(@8002 ~ ?)로 이동한다.
6. 인덱스 1을 검색해 이동한다.
7. 인덱스 1이 가지고 있는 주소로 이동해 4를 가져온다.

> @1002 -> @5002 -> @7002 ~ ? -> @7003 -> @5004 -> @8002 ~ ? -> @8003 -> @5006 -> 4반환
